{% extends 'administrator/baseTemplate.html' %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="" style="padding: 50px">
        <form class="form-horizontal form_middle" enctype='multipart/form-data'
              method="POST">{% csrf_token %}
            <div class="row mb-4">
                <div class="col">
                    <div class="form-outline">
                        <input type="text" name="task" id="form6Example1" class="form-control"/>
                        <label class="form-label">Task Name</label>
                    </div>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col">
                    <div class="form-outline">
                        <input id="latitude" name="latitude" type="text" class="form-control"/>
                        <label class="form-label">Latitude</label>
                    </div>
                </div>
                <div class="col">
                    <div class="form-outline">
                        <input id="longitude" name="longitude" type="text" class="form-control"/>
                        <label class="form-label">Longitude</label>
                    </div>
                </div>
                <div class="col">
                    <div class="form-outline">
                        <input id="accuracy" name="accuracy" type="text" class="form-control"/>
                        <label class="form-label">Location Accuracy</label>
                    </div>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col">
                    <div class="form-outline">
                        <select class="form-control" id="id_status" name="status">
                            {% for choice in form.status.field.choices %}
                                <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                            {% endfor %}
                        </select>
                        <label class="form-label" for="status">Status</label>
                    </div>
                </div>
                            <div class="col">
                    <div class="form-outline">
                        <label class="form-label">Picture</label>
                        <input name="picture" type="file"/>
                    </div>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col">
                    <div class="form-outline">
                        <input name="feedback" type="text" class="form-control"/>
                        <label class="form-label">Feedback</label>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary btn-block mb-4" style="margin-top: 40px">Submit</button>
        </form>
    </div>

    <script>
        getLocation();

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function showPosition(position) {
            console.log(position.coords);
            $("#latitude").val(position.coords.latitude);
            $("#longitude").val(position.coords.longitude);
            $("#accuracy").val(position.coords.accuracy + "m");
        }
    </script>
{% endblock %}
